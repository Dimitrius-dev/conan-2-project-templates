# Conan-lib-project template
___
### Описание
___
Использования пакетного менеджера Conan 2.0 для создания библиотеки.
___

### Обязательная иерархия папок и файлов
___
```
build-lib-...
    lib
        include
            *.h
            *.*
        src
            *.cpp
            *.*
        CMakeLists.txt
    test_lib
        include
            *.h
            *.*
        src
            *.cpp
            *.*
        CMakeLists.txt
    conanfile.py
    CMakeLists.txt
```
Для создания библиотеки требуются:
+ Исходники - сама библиотека
+ Тест библиотеки - тест использования
+ Составленные CMakeLists.txt - файл сборки на cmake
+ conanfile.py - скрипт упаковки в пакет

### Обратите внимание на требования:
+ Для полной функциональности вышеописанную иерархию директорий изменять нельзя,
  можно только наполнять её все новым содержимым
+ Папка ```lib``` должна выглядеть как отдельный проект с названием
совпадающим с названием корневого проекта.
Это сделано так, чтобы сохранять связь с папкой-тестером ```test_lib```
и экспортировать в готовый пакет только папку ```lib```.

## Сборка с помощью шаблона ```CMakeConanProject.cmake```
___
Для подключения шаблона в корневом файле ```CMakeLists.txt``` сделайте следующую вставку
```
. . .
set(conan "/home/belov/.local/bin/conan")
include(CMakeConanProject.cmake)
. . .
```
Переменная ```conan``` - путь к conan, поставьте свое значение.


## C использование ```CLion```
Для создания библиотеки требуется запустить build для cmake цели -
```create_lib```

## Без использование ```CLion```
Для создания библиотеки требуется в папке, где находится ```conanfile.py``` вызвать команду
```
conan create .
```
В данной команде можно указывать много дополнительных параметров.

## Тестирование
___
Для тестирования в папке ```test_lib``` в ```CMakeLists.txt``` определяется цель (target)
для сборки теста.

## Процесс сборки
___
1. Conan начнет собирать библиотеку с использованием уже имеющегося CMakeLists.txt файла библиотеку
2. Conan упакует все исходники для последующих компиляций и уже скомпилированные файлы библиотеки в пакет
3. Conan отправит этот покет в локальный репозиторий на компьютере


## Дополнительные команды
___
1. Посмотреть созданный пакет можно командой:
    ```
    conan list "название библиотеки"
    ```
   с помощью флага ```-r=...``` можно посмотреть к ```remote``` репозиториях.


2. Команда просмотра все данных библиотеки
    ```
    conan list "название библиотеки"#:*
    ```

3. Для того чтобы добавить удаленный репозиторий можно воспользоваться командной
    ```
    conan remote add [название репозитория]
    ```
4. Для того чтобы отправить пакет в удаленный репозиторий можно воспользоваться командной
    ```
    conan upload "название пакета...версия" -r=[название репозитория]
    ```